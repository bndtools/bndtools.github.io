---
layout: post
title: Bndtools Release 6.0.0
description: Release for a feature filled Bndtools 6.0.0
comments: true
author: Juergen Albert
---

The [6.0.0](https://github.com/bndtools/bnd/wiki/Changes-in-6.0.0) build is now available as of Oct 04 2021. This is a big release with lots of new features and performance enhancements. 

# Some highlights

* Bndtools performance and stability update
* Bugfixes and Stability improvement for the m2e Connector
* The [`-runjdb`](https://bnd.bndtools.org/instructions/runjdb.html) instruction is updated to support a `host:port` value for the `-agentlib:jdwp=transport=dt_socket` `address` option.
* The Bnd Gradle plugins and tasks now support Gradle 7.
* Added support for the new features in the forthcoming OSGi Declarative Services 1.5 specification from the OSGi Working Group at Eclipse.
* BndPomRepository - By setting `dependencyManagement=true`, the repository now considers the `dependencyManagement` of a pom as well.
* Support for  `libraries` were added with the `-library` instruction. Libraries are bundles that can carry a workspace, project, or bndrun file plus any additional (binary) resources like for example a repository content. If a library is selected, it is expanded in the bundle cache and the appropriate bnd is included. Library bundles are stored in repositories or on the file system. See [-library](https://bnd.bndtools.org/instructions/library.html)
* Internally the bnd Workspace, Projects, and repositories now have a centralized event model that will make it easier to use bnd in different IDEs.
* The Bnd Gradle plugins and tasks underwent a large update to modernize their implementations and prepare for Gradle 7 and newer Gradle idioms. The implementation classes have all been rewritten in Java. All Bnd Gradle task properties are now [Gradle Properties](https://docs.gradle.org/current/userguide/lazy_configuration.html#lazy_properties) and should generally be set using an assignment in your build script. This also means the Gradle Properties are typed and expect the correct value when being set. So, using the `Export` task as an example, set the `bndrun` property with `bndrun = file("mybndrun.bndrun")` rather than `bndrun "mybndrun.bndrun"`. With the change to use Gradle Properties, the latter example is no longer possible as Gradle expects the `bndrun(String)` method which does not exist. So you may need to update your build scripts to use assignment of the proper argument type for setting task properties.
* Updated generate. 
  * Multiple clauses using the same output conflicted.
    Changed to prepare the steps so directory clean happens
    before all steps.
  * Using plain maven JARs had a cast problem with versions.
    Now supports bnd.info namespace for versions and
    properly coerces the version to a bnd version.
  * A JAR without a main class in the manifest can now be used.
    If the JAR had no Main-Class, an error was reported. Now
    the `classpath` option is first passed. If there is no
    Main-Class in the manifest but the `classpath` is set
    then we try the command anyway.
* Many deadlocks with project building resolved
* OBR Exporter of bndrun files to Repository XML, [read more](https://bnd.bndtools.org/plugins/obrexporter.html)
* [AspectJ plugin](https://bnd.bndtools.org/plugins/aspectj.html)
* The JUnit Platform tester bundle will now only output status about skipped/aborted tests if the `tester.trace` property is set.
* Support for Java 17 class file format.

# Artifacts and Repositories

- Bnd (maven repo) repository URL:
  [Maven Central](https://repo1.maven.org/maven2) or https://bndtools.jfrog.io/bndtools/update-latest
  
- Bndtools (p2 update site) repository URL:
  https://bndtools.jfrog.io/bndtools/update-latest
  
- Bndtools GAV:
  biz.aQute.bnd:biz.aQute.bndlib:6.0.0
  
- Bnd Gradle Plugin buildscript:

``` groovy
  buildscript {
      repositories {
      maven {
          url 'https://bndtools.jfrog.io/bndtools/update-latest'
          }
      }
      dependencies {
      	classpath 'biz.aQute.bnd:biz.aQute.bnd.gradle:5.1.0-SNAPSHOT'
      }
  }
```

- Bnd Maven Plugins:
```xml
<pluginRepositories>
	<pluginRepository>
        <id>bnd-snapshots</id>
        <url>https://bndtools.jfrog.io/bndtools/update-latest/</url>
        <layout>default</layout>
        <releases>
        	<enabled>false</enabled>
		</releases>
	</pluginRepository>
</pluginRepositories>
```


Release notes are at https://github.com/bndtools/bnd/wiki/Changes-in-6.0.0

Please try this out and report any issues.
